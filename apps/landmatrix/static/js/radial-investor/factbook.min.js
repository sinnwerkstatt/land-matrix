function Factbook(a,b,c,f){this.dependencyData=f;this.dimsUnit=c;this.numericFilter={};this.ordinalFilter={};this.dependencyFilter={};this.data=a;this.dimensions=b;this.countries={};this.domain={};for(var d in this.dimensions){var a=1E8,b=0,c=this.dimensions[d],e;for(e in this.data)this.data[e][c]<a?a=this.data[e][c]:this.data[e][c]>b&&(b=this.data[e][c]);this.domain[c]={min:a,max:b}}for(d in this.data)this.ordinalFilter[this.data[d].Name]=void 0,this.countries[this.data[d].Name]=d}
Factbook.prototype.getConnectingCountries=function(a){var b=[];if(this.dependencyData[a])for(country2 in this.dependencyData[a])dependencyData[a][country2].d>absoluteGraphThreshold&&(factbook.dependencyFilter.min&&factbook.dependencyFilter.max?dependencyData[a][country2].d<factbook.dependencyFilter.max&&dependencyData[a][country2].d>factbook.dependencyFilter.min&&b.push(country2):b.push(country2));return b};
Factbook.prototype.isFiltered=function(a){if(!(a.Name in this.ordinalFilter))return!0;for(var b in this.numericFilter)if(a[b]<this.numericFilter[b].min||a[b]>this.numericFilter[b].max)return!0;return!1};Factbook.prototype.assertFilter=function(a){a in this.numericFilter||(this.numericFilter[a]={min:this.domain[a].min,max:this.domain[a].max})};
Factbook.prototype.resetFilter=function(a){if(1==arguments.length){var b={},c;for(c in this.numericFilter)c!=a&&(b[c]={min:this.numericFilter[c].min,max:this.numericFilter[c].max});this.numericFilter=b}else for(c in this.ordinalFilter[a]={},this.countries)this.ordinalFilter[c]=void 0};Factbook.prototype.getFilterBounds=function(a){return a in this.numericFilter?this.numericFilter[a]:this.domain[a]};
Factbook.prototype.getFiltered=function(){for(var a=[],b=0;b<this.data.length;b++)this.isFiltered(this.data[b])&&a.push(this.data[b]);return a};Factbook.prototype.getUnfiltered=function(){for(var a=[],b=0;b<this.data.length;b++)this.isFiltered(this.data[b])||a.push(this.data[b]);return a};Factbook.prototype.getFilteredCountries=function(){for(var a={},b=0;b<this.data.length;b++)this.isFiltered(this.data[b])&&(a[this.data[b].Name]=void 0);return a};
Factbook.prototype.getUnfilteredCountries=function(){for(var a={},b=0;b<this.data.length;b++)this.isFiltered(this.data[b])||(a[this.data[b].Name]=void 0);return a};
Factbook.prototype.getCountryData=function(a){if("string"==typeof a)return!(a in this.countries)?(debug&&console.log("lib_factbook.js: '"+a+"' not in Factbook data."),[]):Array(this.data[this.countries[a]]);for(var b=[],c=0;c<a.length;c++)a[c]in this.countries?b.push(this.data[this.countries[a[c]]]):debug&&console.log("lib_factbook.js: '"+a+"' not in Factbook data.");return b};Factbook.prototype.filterIsZeroSpan=function(a){return this.numericFilter[a].min==this.numericFilter[a].max};
Factbook.prototype.filterIsModified=function(a){return!(a in this.numericFilter)?!1:this.numericFilter[a].min!=this.domain[a].min||this.numericFilter[a].max!=this.domain[a].max};
