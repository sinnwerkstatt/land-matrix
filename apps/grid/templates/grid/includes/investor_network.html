{% load i18n %}
<p>&nbsp;</p>
<p class="alert alert-info">
    <strong>{% trans "Network of parent companies and tertiary investors/lenders" %}.</strong> {% trans "Please right-click the nodes to get more details." %}
</p>
<div id="investor-network">
</div>

<div class="row">
  <div id="investor-level" class="col-sm-6">
    <h5>{% trans "Level of parent investors" %}</h5>
    <div class="slider-container col-sm-8">
      <input type="range" min="1" max="10" value="1" class="slider" id="depth">
    </div>
    <div class="col-sm-8">
      <input type="checkbox" class="show_deals" id="show_deals" checked="checked">
      <label for="show_deals">{% trans "Show deals" %}</label>
    </div>
  </div>
  <div id="investor-legend" class="col-sm-6">
    <h5>{% trans "Legend" %}</h5>
    <ul class="list-unstyled">
      <li><span class="legend-icon deal"></span> {% trans "Is operating company of" %}</li>
      <li><span class="legend-icon parent"></span> {% trans "Is parent company of" %}</li>
      <li><span class="legend-icon tertiary"></span> {% trans "Is tertiary investor/lender of" %}</li>
      <li><span class="legend-icon has-children"></span> {% trans "Left-click to reveal related parent companies and tertiary investors/lenders." %}</li>
      <li><span class="legend-icon investor"></span> {% trans "Right-click on investors to get more information." %}</li>
      <li><span class="legend-icon none"></span> {% trans "Left-click to hide related parent companies and tertiary investors/lenders." %}</li>
      <li><span class="legend-icon none"></span> {% trans "Double-click to zoom in." %}</li>
    </ul>
  </div>
</div>

<script type="text/javascript">
  function updateInvestorNetwork() {
	    var depth = parseInt($("#depth").val()),
          showDeals = $("#show_deals")[0].checked && "1" || "0";
	    loadInvestorNetwork({{ history_id }}, depth, showDeals);
  }
	$(document).ready(function () {
	  $("#depth").change(updateInvestorNetwork);
	  $("#show_deals").change(updateInvestorNetwork);
	  updateInvestorNetwork();
	});
</script>
{% include "grid/modals/investor_modal.html" %}
{% include "grid/modals/deal_modal.html" %}
