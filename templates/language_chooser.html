{% load i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}

<li class="dropdown">
  <a href="#" class="" data-toggle="dropdown" role="button" aria-haspopup="true"
     aria-expanded="false">
    {% for language in languages %}
      {% if language.code == LANGUAGE_CODE %}
        <i class="fa fa-language" aria-hidden="true" style="display:inline;"></i>
        {{ language.name_local|title }}
      {% endif %}
    {% endfor %}
  </a>
  <ul class="dropdown-menu">
    {% for language in languages %}
      <li{% if language.code == LANGUAGE_CODE %} class="active"{% endif %}>
        <a href="{% url 'switch_language' language=language.code %}?next={{ request.path }}">
          {{ language.name_local|title }} ({{ language.code }})</a>
      </li>
    {% endfor %}
  </ul>
</li>
